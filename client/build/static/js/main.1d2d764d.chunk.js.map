{"version":3,"sources":["context/auth-context.js","pages/Auth.js","components/Spinner.js","components/BookingList.js","components/Chart.js","components/BookingsControls.js","pages/Bookings.js","components/Modal.js","components/Backdrop.js","components/EventItem.js","components/EventList.js","pages/Events.js","components/DrawerButton.js","components/MainNavigation.js","components/Drawer.js","App.js","index.js"],"names":["React","createContext","token","userId","login","tokenExpiration","logout","AuthPage","props","_this","Object","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","switchModeHandler","setState","prevState","isLogin","submitHandler","event","preventDefault","email","emailEl","current","value","password","passwordEl","trim","length","requestBody","query","variables","state","fetch","method","body","JSON","stringify","headers","Content-type","then","res","status","Error","json","resData","data","context","catch","err","console","log","createRef","react_default","a","createElement","className","onSubmit","htmlFor","type","id","ref","onClick","Component","contextType","AuthContext","spinner","bookingList","bookings","map","booking","key","_id","title","Date","createdAt","toLocaleDateString","onDelete","bind","BOOKINGS_BUCKETS","Cheap","min","max","Normal","Expensive","Chart","chartData","labels","datasets","values","_loop","bucket","filteredBookings","reduce","prev","price","push","fillColor","strokeColor","highlightFill","highlightStroke","toConsumableArray","style","textAlign","react_chartjs","BookingsControls","activeButton","activeOutput","BookingsPage","fecthBookings","isLoading","Authorization","showDetailHandler","eventId","selectedEvent","events","find","e","deleteBookingHandler","bookingId","filter","outputHandler","output","content","components_Spinner","Fragment","src_components_BookingsControls","components_BookingList","components_Chart","Modal","children","canCancel","onCancel","canConfirm","onConfirm","confirmText","Backdrop","click","eventItem","date","creatorId","onDetail","eventList","components_EventItem","creator","viewDetails","EventsPage","isActive","createEventHandler","creating","modalConfirmHandler","titleEl","priceEl","dateEl","description","descriptionEl","updatedEvents","createEvent","modalCancelHandler","bookEventHandler","fetchEvents","_this2","src_components_Backdrop","src_components_Modal","rows","components_EventList","drawerButton","MainNavigation","auth_context","Consumer","components_DrawerButton","drawerClick","react_router_dom","to","Drawer","drawerClasses","show","App","drawerOpen","drawerClickHandler","backdropClickHandler","backdrop","Provider","src_components_MainNavigation","src_components_Drawer","react_router","from","exact","path","component","ReactDOM","render","src_App_0","document","getElementById"],"mappings":"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","file":"static/js/main.1d2d764d.chunk.js","sourcesContent":["import React from \"react\";\n\nexport default React.createContext({\n\ttoken: null,\n\tuserId: null,\n\tlogin: (token, userId, tokenExpiration) => {},\n\tlogout: () => {}\n});\n","import React from \"react\";\nimport AuthContext from \"../context/auth-context\";\n\nimport \"./Auth.css\";\n\nclass AuthPage extends React.Component {\n\tstatic contextType = AuthContext;\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = {\n\t\t\tisLogin: true\n\t\t};\n\t\tthis.emailEl = React.createRef();\n\t\tthis.passwordEl = React.createRef();\n\t}\n\n\tswitchModeHandler = () => {\n\t\tthis.setState(prevState => {\n\t\t\treturn { isLogin: !prevState.isLogin };\n\t\t});\n\t};\n\n\tsubmitHandler = event => {\n\t\tevent.preventDefault();\n\t\tconst email = this.emailEl.current.value;\n\t\tconst password = this.passwordEl.current.value;\n\n\t\tif (email.trim().length === 0 || password.trim().length === 0) {\n\t\t\treturn;\n\t\t}\n\n\t\tlet requestBody = {\n\t\t\tquery: `\n\t\t\t\tquery Login($email: String!, $password: String!) {\n\t\t\t\t\tlogin(email: $email, password: $password) {\n\t\t\t\t\t\tuserId\n\t\t\t\t\t\ttoken\n\t\t\t\t\t\ttokenExpiration\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t`,\n\t\t\tvariables: {\n\t\t\t\temail: email,\n\t\t\t\tpassword: password\n\t\t\t}\n\t\t};\n\n\t\tif (!this.state.isLogin) {\n\t\t\trequestBody = {\n\t\t\t\tquery: `\n\t\t\t\t\tmutation CreateUser($email: String!, $password: String!) {\n\t\t\t\t\t\tcreateUser(userInput: {email: $email, password: $password}) {\n\t\t\t\t\t\t\t_id\n\t\t\t\t\t\t\temail\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t`,\n\t\t\t\tvariables: {\n\t\t\t\t\temail: email,\n\t\t\t\t\tpassword: password\n\t\t\t\t}\n\t\t\t};\n\t\t}\n\n\t\tfetch(\"http://localhost:3001/graphql\", {\n\t\t\tmethod: \"POST\",\n\t\t\tbody: JSON.stringify(requestBody),\n\t\t\theaders: {\n\t\t\t\t\"Content-type\": \"application/json\"\n\t\t\t}\n\t\t})\n\t\t\t.then(res => {\n\t\t\t\tif (res.status !== 200 && res.status !== 201) {\n\t\t\t\t\tthrow new Error(\"Request failed\");\n\t\t\t\t}\n\t\t\t\treturn res.json();\n\t\t\t})\n\t\t\t.then(resData => {\n\t\t\t\tif (resData.data.login.token) {\n\t\t\t\t\tthis.context.login(\n\t\t\t\t\t\tresData.data.login.token,\n\t\t\t\t\t\tresData.data.login.userId,\n\t\t\t\t\t\tresData.data.login.tokenExpiration\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t})\n\t\t\t.catch(err => {\n\t\t\t\tconsole.log(err);\n\t\t\t});\n\t};\n\trender() {\n\t\treturn (\n\t\t\t<form className=\"auth-form\" onSubmit={this.submitHandler}>\n\t\t\t\t<div className=\"form-control\">\n\t\t\t\t\t<label htmlFor=\"E-mail\">E-mail</label>\n\t\t\t\t\t<input type=\"email\" id=\"email\" ref={this.emailEl} />\n\t\t\t\t</div>\n\t\t\t\t<div className=\"form-control\">\n\t\t\t\t\t<label htmlFor=\"Password\">Password</label>\n\t\t\t\t\t<input type=\"password\" id=\"password\" ref={this.passwordEl} />\n\t\t\t\t</div>\n\t\t\t\t<div className=\"form-actions\">\n\t\t\t\t\t<button type=\"submit\">Submit</button>\n\t\t\t\t\t<button type=\"button\" onClick={this.switchModeHandler}>\n\t\t\t\t\t\t{this.state.isLogin ? \"Signup\" : \"Login\"}{\" \"}\n\t\t\t\t\t</button>\n\t\t\t\t</div>\n\t\t\t</form>\n\t\t);\n\t}\n}\n\nexport default AuthPage;\n","import React from \"react\";\n\nimport \"./Spinner.css\";\n\nconst spinner = () => (\n\t<div className=\"spinner\">\n\t\t<div className=\"lds-ellipsis\">\n\t\t\t<div />\n\t\t\t<div />\n\t\t\t<div />\n\t\t\t<div />\n\t\t</div>\n\t</div>\n);\n\nexport default spinner;\n","import React from \"react\";\n\nimport './BookingList.css'\n\nconst bookingList = props => (\n\t<ul className=\"bookings-list\">\n\t\t{props.bookings.map(booking => {\n\t\t\treturn (\n\t\t\t\t<li key={booking._id} className=\"bookings-item\">\n\t\t\t\t\t<div className=\"bookings-item-data\">\n\t\t\t\t\t\t{booking.event.title} -{\" \"}\n\t\t\t\t\t\t{new Date(booking.createdAt).toLocaleDateString()}\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className=\"bookings-item-actions\">\n\t\t\t\t\t\t<button className=\"btn\" onClick={props.onDelete.bind(this, booking._id)}>Cancel</button>\n\t\t\t\t\t</div>\n\t\t\t\t</li>\n\t\t\t);\n\t\t})}\n\t</ul>\n);\n\nexport default bookingList;\n","import React from \"react\";\nimport { Bar as BarChart } from \"react-chartjs\";\n\nconst BOOKINGS_BUCKETS = {\n\tCheap: {\n\t\tmin: 0,\n\t\tmax: 50\n\t},\n\tNormal: {\n\t\tmin: 50,\n\t\tmax: 200\n\t},\n\tExpensive: {\n\t\tmin: 200,\n\t\tmax: 1000000000\n\t}\n};\n\nconst Chart = props => {\n\tconst chartData = { labels: [], datasets: [] };\n\tlet values = [];\n\tfor (const bucket in BOOKINGS_BUCKETS) {\n\t\tconst filteredBookings = props.bookings.reduce((prev, current) => {\n\t\t\tif (\n\t\t\t\tcurrent.event.price > BOOKINGS_BUCKETS[bucket].min &&\n\t\t\t\tcurrent.event.price < BOOKINGS_BUCKETS[bucket].max\n\t\t\t) {\n\t\t\t\treturn prev + 1;\n\t\t\t} else {\n\t\t\t\treturn prev;\n\t\t\t}\n\t\t}, 0);\n\t\tvalues.push(filteredBookings);\n\t\tchartData.labels.push(bucket);\n\t\tchartData.datasets.push({\n\t\t\tfillColor: \"rgba(220,220,220,0.5)\",\n\t\t\tstrokeColor: \"rgba(220,220,220,0.8)\",\n\t\t\thighlightFill: \"rgba(220,220,220,0.75)\",\n\t\t\thighlightStroke: \"rgba(220,220,220,1)\",\n\t\t\tdata: values\n\t\t});\n\t\tvalues = [...values];\n\t\tvalues[values.length - 1] = 0;\n\t}\n\n\treturn (\n\t\t<div style={{ textAlign: \"center\" }}>\n\t\t\t<BarChart data={chartData} />\n\t\t</div>\n\t);\n};\n\nexport default Chart;\n","import React from \"react\";\n\nimport \"./BookingsControls.css\";\n\nconst BookingsControls = props => {\n\treturn (\n\t\t<div className=\"bookings-control\">\n\t\t\t<button\n\t\t\t\tclassName={props.activeButton === \"list\" ? \"active\" : \"\"}\n\t\t\t\tonClick={props.activeOutput.bind(this, \"list\")}\n\t\t\t>\n\t\t\t\tList\n\t\t\t</button>\n\t\t\t<button\n\t\t\t\tclassName={props.activeButton === \"chart\" ? \"active\" : \"\"}\n\t\t\t\tonClick={props.activeOutput.bind(this, \"chart\")}\n\t\t\t>\n\t\t\t\tChart\n\t\t\t</button>\n\t\t</div>\n\t);\n};\n\nexport default BookingsControls;\n","import React from \"react\";\nimport AuthContext from \"../context/auth-context\";\nimport Spinner from \"../components/Spinner\";\nimport BookingList from \"../components/BookingList\";\nimport Chart from \"../components/Chart\";\nimport BookingsControls from \"../components/BookingsControls\";\n\nclass BookingsPage extends React.Component {\n\tstatic contextType = AuthContext;\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = {\n\t\t\tisLoading: false,\n\t\t\tbookings: [],\n\t\t\toutput: \"list\"\n\t\t};\n\t}\n\tcomponentDidMount() {\n\t\tthis.fecthBookings();\n\t}\n\n\tfecthBookings = () => {\n\t\tthis.setState({ isLoading: true });\n\t\tconst requestBody = {\n\t\t\tquery: `\n\t\t\t\t\tquery {\n\t\t\t\t\t\tbookings {\n\t\t\t\t\t\t\t_id\n\t\t\t\t\t\t\tcreatedAt\n\t\t\t\t\t\t\tevent {\n\t\t\t\t\t\t\t\t_id\n\t\t\t\t\t\t\t\ttitle\n\t\t\t\t\t\t\t\tdate\n\t\t\t\t\t\t\t\tprice\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t`\n\t\t};\n\n\t\tfetch(\"http://localhost:3001/graphql\", {\n\t\t\tmethod: \"POST\",\n\t\t\tbody: JSON.stringify(requestBody),\n\t\t\theaders: {\n\t\t\t\t\"Content-type\": \"application/json\",\n\t\t\t\tAuthorization: \"Bearer \" + this.context.token\n\t\t\t}\n\t\t})\n\t\t\t.then(res => {\n\t\t\t\tif (res.status !== 200 && res.status !== 201) {\n\t\t\t\t\tthrow new Error(\"Request failed\");\n\t\t\t\t}\n\t\t\t\treturn res.json();\n\t\t\t})\n\t\t\t.then(resData => {\n\t\t\t\tconst bookings = resData.data.bookings;\n\t\t\t\tthis.setState({ bookings: bookings, isLoading: false });\n\t\t\t})\n\t\t\t.catch(err => {\n\t\t\t\tconsole.log(err);\n\t\t\t\tthis.setState({ isLoading: false });\n\t\t\t});\n\t};\n\n\tshowDetailHandler = eventId => {\n\t\tthis.setState(prevState => {\n\t\t\tconst selectedEvent = prevState.events.find(e => e._id === eventId);\n\t\t\treturn { selectedEvent: selectedEvent };\n\t\t});\n\t};\n\n\tdeleteBookingHandler = bookingId => {\n\t\tthis.setState({ isLoading: true });\n\t\tconst requestBody = {\n\t\t\tquery: `\n\t\t\t\t\tmutation DeleteBooking($id: ID!) {\n\t\t\t\t\t\tcancelBooking(bookingId: $id) {\n\t\t\t\t\t\t\t_id\n\t\t\t\t\t\t\ttitle\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t`,\n\t\t\tvariables: {\n\t\t\t\tid: bookingId\n\t\t\t}\n\t\t};\n\n\t\tfetch(\"http://localhost:3001/graphql\", {\n\t\t\tmethod: \"POST\",\n\t\t\tbody: JSON.stringify(requestBody),\n\t\t\theaders: {\n\t\t\t\t\"Content-type\": \"application/json\",\n\t\t\t\tAuthorization: \"Bearer \" + this.context.token\n\t\t\t}\n\t\t})\n\t\t\t.then(res => {\n\t\t\t\tif (res.status !== 200 && res.status !== 201) {\n\t\t\t\t\tthrow new Error(\"Request failed\");\n\t\t\t\t}\n\t\t\t\treturn res.json();\n\t\t\t})\n\t\t\t.then(resData => {\n\t\t\t\tthis.setState(prevState => {\n\t\t\t\t\tconst updatedBookings = prevState.bookings.filter(booking => {\n\t\t\t\t\t\treturn booking._id !== bookingId;\n\t\t\t\t\t});\n\t\t\t\t\treturn { bookings: updatedBookings, isLoading: false };\n\t\t\t\t});\n\t\t\t})\n\t\t\t.catch(err => {\n\t\t\t\tconsole.log(err);\n\t\t\t\tthis.setState({ isLoading: false });\n\t\t\t});\n\t};\n\n\toutputHandler = output => {\n\t\tif (output === \"list\") {\n\t\t\tthis.setState({ output: \"list\" });\n\t\t} else {\n\t\t\tthis.setState({ output: \"chart\" });\n\t\t}\n\t};\n\n\trender() {\n\t\tlet content = <Spinner />;\n\t\tif (!this.state.isLoading) {\n\t\t\tcontent = (\n\t\t\t\t<React.Fragment>\n\t\t\t\t\t<BookingsControls\n\t\t\t\t\t\tactiveButton={this.state.output}\n\t\t\t\t\t\tactiveOutput={this.outputHandler}\n\t\t\t\t\t/>\n\t\t\t\t\t<div>\n\t\t\t\t\t\t{this.state.output === \"list\" ? (\n\t\t\t\t\t\t\t<BookingList\n\t\t\t\t\t\t\t\tbookings={this.state.bookings}\n\t\t\t\t\t\t\t\tonDelete={this.deleteBookingHandler}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t<Chart bookings={this.state.bookings} />\n\t\t\t\t\t\t)}\n\t\t\t\t\t</div>\n\t\t\t\t</React.Fragment>\n\t\t\t);\n\t\t}\n\t\treturn <React.Fragment>{content}</React.Fragment>;\n\t}\n}\n\nexport default BookingsPage;\n","import React from \"react\";\n\nimport \"./Modal.css\";\n\nconst Modal = props => (\n\t<div className=\"modal\">\n\t\t<header className=\"modal-header\">\n\t\t\t<h1>{props.title}</h1>\n\t\t</header>\n\t\t<section className=\"modal-content\">{props.children}</section>\n\t\t<section className=\"modal-actions\">\n\t\t\t{props.canCancel && (\n\t\t\t\t<button className=\"btn\" onClick={props.onCancel}>\n\t\t\t\t\tCancel\n\t\t\t\t</button>\n\t\t\t)}\n\t\t\t{props.canConfirm && (\n\t\t\t\t<button className=\"btn\" onClick={props.onConfirm}>\n\t\t\t\t\t{props.confirmText}\n\t\t\t\t</button>\n\t\t\t)}\n\t\t</section>\n\t</div>\n);\n\nexport default Modal;\n","import React from \"react\";\n\nimport \"./Backdrop.css\";\n\nconst Backdrop = props => <div className=\"backdrop\" onClick={props.click} />;\n\nexport default Backdrop;\n","import React from \"react\";\n\nimport \"./EventItem.css\";\n\nconst eventItem = props => (\n\t<li key={props.eventId} className=\"events-list-item\">\n\t\t<div>\n\t\t\t<h1>{props.title}</h1>\n\t\t\t<h2>${props.price} - {new Date(props.date).toLocaleDateString()}</h2>\n\t\t</div>\n\t\t<div>\n\t\t\t{props.userId === props.creatorId ? (\n\t\t\t\t<p>your the owner of this event</p>\n\t\t\t) : (\n\t\t\t\t<button className=\"btn\" onClick={props.onDetail.bind(this, props.eventId)}>View Details</button>\n\t\t\t)}\n\t\t</div>\n\t</li>\n);\n\nexport default eventItem;\n","import React from \"react\";\nimport EventItem from \"./EventItem\";\n\nimport \"./EventList.css\";\n\nconst eventList = props => {\n\tconst events = props.events.map(event => {\n\t\treturn (\n\t\t\t<EventItem\n\t\t\t\tkey={event._id}\n\t\t\t\teventId={event._id}\n\t\t\t\ttitle={event.title}\n\t\t\t\tprice={event.price}\n\t\t\t\tdate={event.date}\n\t\t\t\tuserId={props.userId}\n\t\t\t\tcreatorId={event.creator._id}\n\t\t\t\tonDetail={props.viewDetails}\n\t\t\t/>\n\t\t);\n\t});\n\n\treturn <ul className=\"event-list\">{events}</ul>;\n};\nexport default eventList;\n","import React from \"react\";\nimport Modal from \"../components/Modal\";\nimport Backdrop from \"../components/Backdrop\";\nimport EventList from \"../components/EventList\";\nimport AuthContext from \"../context/auth-context\";\nimport Spinner from \"../components/Spinner\";\n\nimport \"./Events.css\";\n\nclass EventsPage extends React.Component {\n\tstatic contextType = AuthContext;\n\tisActive = true;\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = {\n\t\t\tcreating: false,\n\t\t\tevents: [],\n\t\t\tisLoading: false,\n\t\t\tselectedEvent: null\n\t\t};\n\t\tthis.titleEl = React.createRef();\n\t\tthis.priceEl = React.createRef();\n\t\tthis.dateEl = React.createRef();\n\t\tthis.descriptionEl = React.createRef();\n\t}\n\n\tcomponentDidMount() {\n\t\tthis.fetchEvents();\n\t}\n\n\tcreateEventHandler = () => {\n\t\tthis.setState({ creating: true });\n\t};\n\n\tmodalConfirmHandler = () => {\n\t\tthis.setState({ creating: false });\n\t\tconst title = this.titleEl.current.value;\n\t\tconst price = +this.priceEl.current.value;\n\t\tconst date = this.dateEl.current.value;\n\t\tconst description = this.descriptionEl.current.value;\n\n\t\tif (\n\t\t\ttitle.trim().length === 0 ||\n\t\t\tprice <= 0 ||\n\t\t\tdate.trim().length === 0 ||\n\t\t\tdescription.trim().length === 0\n\t\t) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst event = { title, price, date, description };\n\t\tconsole.log(event);\n\n\t\tconst requestBody = {\n\t\t\tquery: `\n\t\t\t\t\tmutation CreateEvent($title: String!, $description: String!, $price: Float!, $date: String!) {\n\t\t\t\t\t\tcreateEvent(eventInput: {title: $title, description: $description, price: $price, date: $date}) {\n\t\t\t\t\t\t\t_id\n\t\t\t\t\t\t\ttitle\n\t\t\t\t\t\t\tdate\n\t\t\t\t\t\t\tprice\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t`,\n\t\t\tvariables: {\n\t\t\t\ttitle: title,\n\t\t\t\tdescription: description,\n\t\t\t\tprice: price,\n\t\t\t\tdate: date\n\t\t\t}\n\t\t};\n\n\t\tconst token = this.context.token;\n\n\t\tfetch(\"http://localhost:3001/graphql\", {\n\t\t\tmethod: \"POST\",\n\t\t\tbody: JSON.stringify(requestBody),\n\t\t\theaders: {\n\t\t\t\t\"Content-type\": \"application/json\",\n\t\t\t\tAuthorization: \"Bearer \" + token\n\t\t\t}\n\t\t})\n\t\t\t.then(res => {\n\t\t\t\tif (res.status !== 200 && res.status !== 201) {\n\t\t\t\t\tthrow new Error(\"Request failed\");\n\t\t\t\t}\n\t\t\t\treturn res.json();\n\t\t\t})\n\t\t\t.then(resData => {\n\t\t\t\tthis.setState(prevState => {\n\t\t\t\t\tconst updatedEvents = [...prevState.events];\n\t\t\t\t\tupdatedEvents.push({\n\t\t\t\t\t\t_id: resData.data.createEvent._id,\n\t\t\t\t\t\ttitle: resData.data.createEvent.title,\n\t\t\t\t\t\tdescription: resData.data.createEvent.description,\n\t\t\t\t\t\tdate: resData.data.createEvent.date,\n\t\t\t\t\t\tprice: resData.data.createEvent.price,\n\t\t\t\t\t\tcreator: {\n\t\t\t\t\t\t\t_id: this.context.userId\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\treturn { events: updatedEvents };\n\t\t\t\t});\n\t\t\t})\n\t\t\t.catch(err => {\n\t\t\t\tconsole.log(err);\n\t\t\t});\n\t};\n\n\tmodalCancelHandler = () => {\n\t\tthis.setState({ creating: false, selectedEvent: null });\n\t};\n\n\tfetchEvents() {\n\t\tthis.setState({ isLoading: true });\n\t\tconst requestBody = {\n\t\t\tquery: `\n\t\t\t\t\tquery {\n\t\t\t\t\t\tevents {\n\t\t\t\t\t\t\t_id\n\t\t\t\t\t\t\ttitle\n\t\t\t\t\t\t\tdate\n\t\t\t\t\t\t\tprice\n\t\t\t\t\t\t\tcreator {\n\t\t\t\t\t\t\t\t_id\n\t\t\t\t\t\t\t\temail\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t`\n\t\t};\n\n\t\tfetch(\"http://localhost:3001/graphql\", {\n\t\t\tmethod: \"POST\",\n\t\t\tbody: JSON.stringify(requestBody),\n\t\t\theaders: {\n\t\t\t\t\"Content-type\": \"application/json\"\n\t\t\t}\n\t\t})\n\t\t\t.then(res => {\n\t\t\t\tif (res.status !== 200 && res.status !== 201) {\n\t\t\t\t\tthrow new Error(\"Request failed\");\n\t\t\t\t}\n\t\t\t\treturn res.json();\n\t\t\t})\n\t\t\t.then(resData => {\n\t\t\t\tconst events = resData.data.events;\n\t\t\t\tif (this.isActive) {\n\t\t\t\t\tthis.setState({ events: events, isLoading: false });\n\t\t\t\t}\n\t\t\t})\n\t\t\t.catch(err => {\n\t\t\t\tif (this.isActive) {\n\t\t\t\t\tthis.setState({ isLoading: false });\n\t\t\t\t}\n\t\t\t});\n\t}\n\n\tshowDetailHandler = eventId => {\n\t\tthis.setState(prevState => {\n\t\t\tconst selectedEvent = prevState.events.find(e => e._id === eventId);\n\t\t\treturn { selectedEvent: selectedEvent };\n\t\t});\n\t};\n\n\tbookEventHandler = () => {\n\t\tif (!this.context.token) {\n\t\t\tthis.setState({ selectedEvent: null });\n\t\t\treturn;\n\t\t}\n\t\tconst requestBody = {\n\t\t\tquery: `\n\t\t\t\t\tmutation BookEvent($id: ID!) {\n\t\t\t\t\t\tbookEvent(eventId: $id) {\n\t\t\t\t\t\t\t_id\n\t\t\t\t\t\t\tcreatedAt\n\t\t\t\t\t\t\tupdatedAt\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t`,\n\t\t\tvariables: {\n\t\t\t\tid: this.state.selectedEvent._id\n\t\t\t}\n\t\t};\n\n\t\tfetch(\"http://localhost:3001/graphql\", {\n\t\t\tmethod: \"POST\",\n\t\t\tbody: JSON.stringify(requestBody),\n\t\t\theaders: {\n\t\t\t\t\"Content-type\": \"application/json\",\n\t\t\t\tAuthorization: \"Bearer \" + this.context.token\n\t\t\t}\n\t\t})\n\t\t\t.then(res => {\n\t\t\t\tif (res.status !== 200 && res.status !== 201) {\n\t\t\t\t\tthrow new Error(\"Request failed\");\n\t\t\t\t}\n\t\t\t\treturn res.json();\n\t\t\t})\n\t\t\t.then(resData => {\n\t\t\t\tconsole.log(resData);\n\t\t\t\tthis.setState({ selectedEvent: null });\n\t\t\t})\n\t\t\t.catch(err => {\n\t\t\t\tconsole.log(err);\n\t\t\t});\n\t};\n\n\tcomponentWillUnmount() {\n\t\tthis.isActive = false;\n\t}\n\n\trender() {\n\t\treturn (\n\t\t\t<React.Fragment>\n\t\t\t\t{(this.state.creating || this.state.selectedEvent) && <Backdrop />}\n\t\t\t\t{this.state.creating && (\n\t\t\t\t\t<Modal\n\t\t\t\t\t\ttitle=\"Add Event\"\n\t\t\t\t\t\tcanCancel\n\t\t\t\t\t\tcanConfirm\n\t\t\t\t\t\tonCancel={this.modalCancelHandler}\n\t\t\t\t\t\tonConfirm={this.modalConfirmHandler}\n\t\t\t\t\t\tconfirmText=\"Confirm\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<form>\n\t\t\t\t\t\t\t<div className=\"form-control\">\n\t\t\t\t\t\t\t\t<label htmlFor=\"title\">Title</label>\n\t\t\t\t\t\t\t\t<input type=\"text\" id=\"title\" ref={this.titleEl} />\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div className=\"form-control\">\n\t\t\t\t\t\t\t\t<label htmlFor=\"price\">Price</label>\n\t\t\t\t\t\t\t\t<input type=\"number\" id=\"price\" ref={this.priceEl} />\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div className=\"form-control\">\n\t\t\t\t\t\t\t\t<label htmlFor=\"date\">Date</label>\n\t\t\t\t\t\t\t\t<input type=\"datetime-local\" id=\"date\" ref={this.dateEl} />\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div className=\"form-control\">\n\t\t\t\t\t\t\t\t<label htmlFor=\"description\">Description</label>\n\t\t\t\t\t\t\t\t<textarea id=\"description\" rows=\"4\" ref={this.descriptionEl} />\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</form>\n\t\t\t\t\t</Modal>\n\t\t\t\t)}\n\t\t\t\t{this.state.selectedEvent && (\n\t\t\t\t\t<Modal\n\t\t\t\t\t\ttitle={this.state.selectedEvent.title}\n\t\t\t\t\t\tcanCancel\n\t\t\t\t\t\tcanConfirm\n\t\t\t\t\t\tonCancel={this.modalCancelHandler}\n\t\t\t\t\t\tonConfirm={this.bookEventHandler}\n\t\t\t\t\t\tconfirmText={this.context.token ? \"Book\" : \"Confirm\"}\n\t\t\t\t\t>\n\t\t\t\t\t\t<h1>{this.state.selectedEvent.title}</h1>\n\t\t\t\t\t\t<h2>\n\t\t\t\t\t\t\t${this.state.selectedEvent.price} -{\" \"}\n\t\t\t\t\t\t\t{new Date(this.state.selectedEvent.date).toLocaleDateString()}\n\t\t\t\t\t\t</h2>\n\t\t\t\t\t\t<p>{this.state.selectedEvent.description}</p>\n\t\t\t\t\t</Modal>\n\t\t\t\t)}\n\t\t\t\t{this.context.token && (\n\t\t\t\t\t<div className=\"events-control\">\n\t\t\t\t\t\t<p>Share your own Events!</p>\n\t\t\t\t\t\t<button className=\"btn\" onClick={this.createEventHandler}>\n\t\t\t\t\t\t\tCreate Event\n\t\t\t\t\t\t</button>\n\t\t\t\t\t</div>\n\t\t\t\t)}\n\t\t\t\t{this.state.isLoading ? (\n\t\t\t\t\t<Spinner />\n\t\t\t\t) : (\n\t\t\t\t\t<EventList\n\t\t\t\t\t\tevents={this.state.events}\n\t\t\t\t\t\tuserId={this.context.userId}\n\t\t\t\t\t\tviewDetails={this.showDetailHandler}\n\t\t\t\t\t/>\n\t\t\t\t)}\n\t\t\t</React.Fragment>\n\t\t);\n\t}\n}\n\nexport default EventsPage;\n","import React from \"react\";\n\nimport './DrawerButton.css';\n\nconst drawerButton = props => (\n\t<button className=\"drawer-button\" onClick={props.click} >\n\t\t<div className=\"button-line\" />\n\t\t<div className=\"button-line\" />\n\t\t<div className=\"button-line\" />\n\t</button>\n);\n\nexport default drawerButton;\n","import React from \"react\";\nimport { NavLink } from \"react-router-dom\";\nimport AuthContext from \"../context/auth-context\";\nimport DrawerButton from \"./DrawerButton\";\n\nimport \"./MainNavigation.css\";\n\nconst MainNavigation = props => (\n\t<AuthContext.Consumer>\n\t\t{context => {\n\t\t\treturn (\n\t\t\t\t<header className=\"main-navigation\">\n\t\t\t\t\t\t<DrawerButton click={props.drawerClick} />\n\t\t\t\t\t<div className=\"main-navigation-logo\">\n\t\t\t\t\t\t<h1>EventBooking</h1>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className=\"main-navigation-items\">\n\t\t\t\t\t\t<ul>\n\t\t\t\t\t\t\t{!context.token && (\n\t\t\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t\t\t<NavLink to=\"/auth\">Login</NavLink>\n\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t\t<NavLink to=\"/events\">Events</NavLink>\n\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t{context.token && (\n\t\t\t\t\t\t\t\t<React.Fragment>\n\t\t\t\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t\t\t\t<NavLink to=\"/bookings\">Bookings</NavLink>\n\t\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t\t\t\t<button onClick={context.logout}>Logout</button>\n\t\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t\t</React.Fragment>\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t</ul>\n\t\t\t\t\t</div>\n\t\t\t\t</header>\n\t\t\t);\n\t\t}}\n\t</AuthContext.Consumer>\n);\n\nexport default MainNavigation;\n","import React from \"react\";\nimport { NavLink } from \"react-router-dom\";\nimport AuthContext from \"../context/auth-context\";\n\nimport \"./Drawer.css\";\n\nconst Drawer = props => {\n\tlet drawerClasses = 'side-drawer';\n\tif (props.show) {\n\t\tdrawerClasses = 'side-drawer open';\n\t}\n return (\n\t<AuthContext.Consumer>\n\t\t{context => {\n\t\t\treturn (\n\t\t\t\t<nav className={drawerClasses}>\n\t\t\t\t\t<ul>\n\t\t\t\t\t\t{!context.token && (\n\t\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t\t<NavLink to=\"/auth\">Login</NavLink>\n\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t)}\n\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t<NavLink to=\"/events\">Events</NavLink>\n\t\t\t\t\t\t</li>\n\t\t\t\t\t\t{context.token && (\n\t\t\t\t\t\t\t<React.Fragment>\n\t\t\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t\t\t<NavLink to=\"/bookings\">Bookings</NavLink>\n\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t\t\t<button onClick={context.logout}>Logout</button>\n\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t</React.Fragment>\n\t\t\t\t\t\t)}\n\t\t\t\t\t</ul>\n\t\t\t\t</nav>\n\t\t\t);\n\t\t}}\n\t</AuthContext.Consumer>\n)};\n\nexport default Drawer;\n","import React from \"react\";\nimport { BrowserRouter, Route, Redirect, Switch } from \"react-router-dom\";\n\nimport AuthPage from \"./pages/Auth\";\nimport BookingsPage from \"./pages/Bookings\";\nimport EventsPage from \"./pages/Events\";\nimport MainNavigation from \"./components/MainNavigation\";\nimport AuthContext from \"./context/auth-context\";\nimport Drawer from \"./components/Drawer\";\nimport Backdrop from \"./components/Backdrop\";\n\nimport \"./App.css\";\n\nclass App extends React.Component {\n  state = {\n    token: null,\n    userId: null,\n    drawerOpen: false\n  };\n\n  login = (token, userId, tokenExpiration) => {\n    this.setState({ token: token, userId: userId });\n  };\n\n  logout = () => {\n    this.setState({ token: null, userId: null });\n  };\n\n  drawerClickHandler = () => {\n    this.setState(prevState => {\n      return { drawerOpen: !prevState.drawerOpen };\n    });\n  };\n\n  backdropClickHandler = () => {\n    this.setState({drawerOpen: false});\n  };\n\n  render() {\n    let backdrop;\n\n    if (this.state.drawerOpen) {\n      backdrop = <Backdrop click={this.backdropClickHandler} />;\n    }\n    return (\n      <BrowserRouter>\n        <React.Fragment>\n          <AuthContext.Provider\n            value={{\n              token: this.state.token,\n              userId: this.state.userId,\n              login: this.login,\n              logout: this.logout\n            }}\n          >\n            <div className=\"content-section\">\n              <MainNavigation drawerClick={this.drawerClickHandler} />\n              <Drawer show={this.state.drawerOpen} />\n              {backdrop}\n              <main className=\"main-content\">\n                <Switch>\n                  {this.state.token && <Redirect from=\"/\" to=\"/events\" exact />}\n                  {this.state.token && (\n                    <Redirect from=\"/auth\" to=\"/events\" exact />\n                  )}\n                  {!this.state.token && (\n                    <Route path=\"/auth\" component={AuthPage} />\n                  )}\n                  <Route path=\"/events\" component={EventsPage} />\n                  {this.state.token && (\n                    <Route path=\"/bookings\" component={BookingsPage} />\n                  )}\n                  {!this.state.token && <Redirect to=\"/auth\" exact />}\n                </Switch>\n              </main>\n            </div>\n          </AuthContext.Provider>\n        </React.Fragment>\n      </BrowserRouter>\n    );\n  }\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(<App />, document.getElementById('root'));\n"],"sourceRoot":""}